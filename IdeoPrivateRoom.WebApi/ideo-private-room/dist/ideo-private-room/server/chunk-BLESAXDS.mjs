import './polyfills.server.mjs';
import{a as W}from"./chunk-TDHYKFJK.mjs";import{N as G,O as J,P as K,S as Q,b as r,d as B,s as $,t as j,u as z,v as U,w as q,x as H,y as V}from"./chunk-4TBIHSIK.mjs";import{$b as k,Ca as h,Fb as F,Gb as s,Hb as g,Ib as f,Nb as y,Oa as b,Qc as R,Sa as a,Xb as S,Zb as w,_ as I,_a as N,ea as d,eb as x,ha as E,ib as m,lb as v,mb as L,pb as C,qb as _,rb as i,sb as o,tb as u,tc as T,xa as P,xb as O,yb as p}from"./chunk-ZDBO6E4J.mjs";import"./chunk-AYA2QI3U.mjs";var D=(()=>{class e{getApprovalStatus(t){switch(t){case r.Pending:return{badgeClass:"text-bg-warning",class:"status-pending",name:r[r.Pending]};case r.Declined:return{badgeClass:"text-bg-danger",class:"status-declined",name:r[r.Declined]};default:return{badgeClass:"text-bg-success",class:"status-confirmed",name:r[r.Approved]}}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ee=(e,l)=>l.id;function te(e,l){if(e&1&&(i(0,"tr")(1,"td"),u(2,"img",5),i(3,"span",6),s(4),o()(),i(5,"td")(6,"h5",7)(7,"span",8),s(8),o()()(),i(9,"td",9)(10,"button",10),s(11," Approve "),o(),i(12,"button",11),s(13,"Decline"),o()()()),e&2){let t=l.$implicit,n=p();a(2),m("src",t.userIcon,b),a(2),g(t.userName),a(3),v(n.eventListTableRowService.getApprovalStatus(n.card().status).badgeClass),a(),g(n.approvalStatus())}}var Y=(()=>{class e{eventListTableRowService=d(D);card=h.required();approvalStatus=T(()=>r[this.card().status]);curentDate=N(new Date);getStatus(t){return t?r[t]:r[r.Pending]}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=E({type:e,selectors:[["app-event-list-table-row-content"]],inputs:{card:[1,"card"]},standalone:!0,features:[y],decls:23,vars:4,consts:[[1,"container-fluid","col-6","ms-0"],[1,"table"],[1,"row","border-bottom","pb-2","mb-2"],[1,"col-12"],[1,"table","table-borderless","mb-0"],["alt","Icon","width","32","height","32",1,"img-fluid",3,"src"],[1,"ms-2"],[1,"mb-0"],[1,"badge","mx-auto"],[1,"text-end"],[1,"btn","btn-outline-primary","btn-sm","me-2"],[1,"btn","btn-outline-danger","btn-sm"]],template:function(n,c){n&1&&(i(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th")(5,"strong"),s(6,"Created At:"),o()(),i(7,"th")(8,"strong"),s(9,"Comment:"),o()()()(),i(10,"tbody")(11,"tr")(12,"td"),s(13),S(14,"date"),o(),i(15,"td"),s(16,"Very detailed comment with details - Demo"),o()()()(),i(17,"div",2)(18,"div",3)(19,"table",4)(20,"tbody"),C(21,te,14,5,"tr",null,ee),o()()()()()),n&2&&(a(13),f("",w(14,1,c.curentDate(),"longDate")," - Demo"),a(8),_(c.card().userApprovalResponses))},dependencies:[R]})}return e})();var Z=(e,l)=>l.id;function ne(e,l){if(e&1&&(s(0),S(1,"date")),e&2){let t=p();f(" - ",w(1,1,t.card().toDate,"longDate")," ")}}function ie(e,l){if(e&1&&u(0,"img",16),e&2){let t=l.$implicit,n=p(3);v(n.eventListTableRowService.getApprovalStatus(n.card().status).class),m("src",t.userIcon,b)("alt",t.userName)}}function oe(e,l){if(e&1&&C(0,ie,1,4,"img",15,Z),e&2){let t=p(2);_(t.card().userApprovalResponses)}}function ae(e,l){if(e&1&&(i(0,"button",14),s(1),o(),x(2,oe,2,0,"ng-template",null,0,k)),e&2){let t=F(3),n=p();m("ngbTooltip",t),a(),f(" +",n.card().userApprovalResponses.length," ")}}function re(e,l){if(e&1&&u(0,"img",16),e&2){let t=l.$implicit,n=p(2);v(n.eventListTableRowService.getApprovalStatus(n.card().status).class),m("src",t.userIcon,b)("alt",t.userName)}}function se(e,l){if(e&1&&C(0,re,1,4,"img",15,Z),e&2){let t=p();_(t.card().userApprovalResponses)}}function le(e,l){if(e&1&&u(0,"app-event-list-table-row-content",17),e&2){let t=p();m("card",t.card())}}var De=(()=>{class e{destroyRef=d(P);eventListService=d(B);eventFiltersService=d(Q);modalService=d(G);eventListTableRowService=d(D);card=h.required();currentDate=T(()=>Date.now());approvalStatus=T(()=>r[this.card().status]);onDelete(t){t.stopPropagation();let n=this.modalService.open(W);n.componentInstance.confirmationTitle="Confirm Deletion",n.componentInstance.confirmationText="Are you sure you want to delete this vacation request?";let c=n.componentInstance.confirmationStatus.subscribe({next:M=>{M===!0&&this.eventListService.deleteEvent(this.card().id).subscribe({complete:()=>this.eventFiltersService.loadFilteredEvents().subscribe(),error:A=>{console.log(A.message)}})}});this.destroyRef.onDestroy(()=>{c.unsubscribe()})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=E({type:e,selectors:[["app-event-list-table-row"]],inputs:{card:[1,"card"]},standalone:!0,features:[y],decls:26,vars:11,consts:[["tipContent",""],["ngbAccordion","","colspan","5",1,"accordion-flush","row","ps-0","pe-0"],["ngbAccordionItem","",1,"ps-0","pe-0"],["ngbAccordionHeader","",1,"ps-0","pe-0"],["ngbAccordionButton","",1,"ps-0","pe-4","border-0"],[1,"col-2"],["alt","Icon",1,"user-icon","me-3",3,"src"],[1,"col-4"],[1,"mb-0"],[1,"badge","mx-auto"],[1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],["type","button","triggers","hover",1,"btn","btn-outline-primary","rounded-circle","p-0",2,"width","32px","height","32px",3,"ngbTooltip"],[1,"status-image","me-2",3,"src","alt","class"],[1,"status-image","me-2",3,"src","alt"],[3,"card"]],template:function(n,c){n&1&&(i(0,"tr",1)(1,"div",2)(2,"h2",3)(3,"button",4)(4,"td",5)(5,"div"),u(6,"img",6),i(7,"strong"),s(8),o()()(),i(9,"td",7),s(10),S(11,"date"),x(12,ne,2,4),o(),i(13,"td",5),x(14,ae,4,2)(15,se,2,0),o(),i(16,"td",5)(17,"h5",8)(18,"span",9),s(19),o()()(),i(20,"td",5)(21,"button",10),O("click",function(A){return c.onDelete(A)}),u(22,"i",11),o()()()(),i(23,"div",12)(24,"div",13),x(25,le,1,1,"ng-template"),o()()()()),n&2&&(a(6),m("src",c.card().userIcon,b),a(2),g(c.card().userName),a(2),f(" ",w(11,8,c.card().fromDate,"longDate")," "),a(2),L(c.card().toDate?12:-1),a(2),L(c.card().userApprovalResponses.length>3?14:15),a(4),v(c.eventListTableRowService.getApprovalStatus(c.card().status).badgeClass),a(),g(c.approvalStatus()))},dependencies:[R,V,z,H,q,U,$,j,Y,K,J],styles:[".status-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:inline-block;border:1px solid}.user-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:inline-block}.status-confirmed[_ngcontent-%COMP%]   #color[_ngcontent-%COMP%]{fill:#198754}.status-confirmed.status-image[_ngcontent-%COMP%]{outline:2px solid #198754;border:1px solid #ced4da}.status-pending[_ngcontent-%COMP%]   #color[_ngcontent-%COMP%]{fill:#f7ca45}.status-pending.status-image[_ngcontent-%COMP%]{outline:2px solid #ffc107;border:1px solid #ced4da}.status-declined[_ngcontent-%COMP%]   #color[_ngcontent-%COMP%]{fill:#dc3545}.status-declined.status-image[_ngcontent-%COMP%]{outline:2px solid #dc3545;border:1px solid #ced4da}.status-image[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%}  .tooltip-inner{background-color:#fff;border:1px solid #0062a2;opacity:1}  .bs-tooltip-top .tooltip-arrow:before,   .bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow:before{border-top-color:#0062a2!important}  .bs-tooltip-top{opacity:1!important}.accordion-button[_ngcontent-%COMP%]:not(.collapsed){outline:none;background-color:#fff}"]})}return e})();export{De as EventListTableRowComponent};
